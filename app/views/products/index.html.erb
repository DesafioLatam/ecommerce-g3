<p id="notice"><%= notice %></p>

<div class="row">
  <div class="col-md-6">
    <h1>Products</h1>
    <table>
      <tbody>
        <% @products.each do |product| %>
          <div class="col-md-6">
            <div class="well">
              <h4> <%= product.name %> <small> (<%= product.category.try(:name) %>) </small></h4>
              <h5> tienda: <%= product.store.name %> </h5>
            <p> Precio: <%= product.price %> </p>
            <p> Stock: <%= product.stock %> </p>
            <%= link_to 'Comprar', product_orders_path(product), method: :post, class:"btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </tbody>
    </table>

    <br>

    <%= link_to 'New Product', new_product_path %>
  </div>
  <div class="col-md-6">
    <div id="map" style='width: 400px; height: 300px;'></div>
  </div>
</div>

<script src="//maps.google.com/maps/api/js?v=3.18&sensor=false&client=&key=&libraries=geometry&language=&hl=&region="></script> 
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script> <!-- only if you need custom infoboxes -->
<script>
  handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers([
    {
      "lat": <%= current_user.latitude %>,
      "lng": <%= current_user.longitude %>,
      "picture": {
        "url": "http://people.mozilla.com/~faaborg/files/shiretoko/firefoxIcon/firefox-32.png",
        "width":  32,
        "height": 32
      },
      "infowindow": "hello!"
    }
  ]);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});

</script>
